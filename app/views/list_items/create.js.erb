$('#error_explanation').remove(); // Removes previous error explanations that may ahve appeared

item = $("<%=j render @list_item %>"); // Renders _list_item.html.erb

<% if @sublist.present? %> // If adding to sublist
	sublist = $('#sublists').children("h1:contains(<%= @sublist.title %>)") // If adding to sublist identifies correct sublist to add new listitem under.
	sublist.siblings('.list-items:first').children('#new-list-item').prepend(item); // Adds it before the other list_items.
<% else %> // If adding to list.
  $('#sublists').siblings('.list-items').children('#new-list-item').prepend(item);// Adds it before the other list_items.
<% end %>

<% if @list_item.errors.blank? %> // If no errors
	$(item).first().css({'background-color':'#88ff88'}).animate({'background-color':'#fff'}, 2000); // Flashes it or the user.
<% end %>

$(".notice").remove(); // Removes previous notice message.

notice = $('<p class="notice" id "notice" ><%= notice %></p>'); // Adds the latest notice message.

$('.list-items').first('#new-list-item').prepend(notice); // Had notice as both id and class.
// Applying the effect to several DOM objects requires using class.

$(notice).animate({ opacity: 0 }, 2000); // Used animate instead of fadeOut() to avoid display:none which makes the div jump up.